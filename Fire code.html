<pre><font color="#007f69">globals</font><font color="#000000"> [<br />  initial-population       </font><font color="#5a5a5a">;; how many individuals (green patches) we started with</font><font color="#000000"><br />  infected-individuals        </font><font color="#5a5a5a">;; how many have been infected so far</font><font color="#000000"><br />  contagion-factor      </font><font color="#5a5a5a">;; factor influencing the spread of the disease (0-7)</font><font color="#000000"><br />  average-population-density</font><font color="#5a5a5a">;;</font><font color="#000000"><br />]<br /><br /></font><font color="#660096">breed</font><font color="#000000"> [individuals person]    </font><font color="#5a5a5a">;; representation of individuals in the population</font><font color="#000000"><br /></font><font color="#660096">breed</font><font color="#000000"> [infections infection]  </font><font color="#5a5a5a">;; turtles representing the infected individuals</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> setup<br />  </font><font color="#0000aa">clear-all</font><font color="#000000"><br /><br />  </font><font color="#0000aa">set-default-shape</font><font color="#000000"> individuals </font><font color="#963700">&quot;square&quot;</font><font color="#000000"><br />  </font><font color="#5a5a5a">;; make some green individuals</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [(</font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000">) </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">60</font><font color="#000000">] </font><font color="#5a5a5a">;; Adjust density based on preference (e.g., 60%)</font><font color="#000000"><br />    [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> ]<br />  </font><font color="#5a5a5a">;; make a column of infected individuals on the left edge</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pxcor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#660096">min-pxcor</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]<br />    [ infect ]<br />  </font><font color="#5a5a5a">;; set population counts</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> initial-population </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]<br />  </font><font color="#0000aa">set</font><font color="#000000"> infected-individuals </font><font color="#963700">0</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> contagion-factor </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> </font><font color="#5a5a5a">;; Random initial contagion factor</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> intervention-strength </font><font color="#963700">5</font><font color="#000000"> </font><font color="#5a5a5a">;; Initial intervention strength (fine-tuned)</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> individual-growth-probability </font><font color="#963700">3</font><font color="#000000"> </font><font color="#5a5a5a">;; Initial individual growth probability (fine-tuned)</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> individual-removal-probability </font><font color="#963700">1</font><font color="#000000"> </font><font color="#5a5a5a">;; Initial individual removal probability (fine-tuned)</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> critical-contagion-threshold </font><font color="#963700">55</font><font color="#000000"> </font><font color="#5a5a5a">;; Initial critical density (fine-tuned)</font><font color="#000000"><br />  </font><font color="#0000aa">set</font><font color="#000000"> intervention-sensitivity </font><font color="#963700">5</font><font color="#000000"> </font><font color="#5a5a5a">;; Initial SOC sensitivity (fine-tuned)</font><font color="#000000"><br />  </font><font color="#0000aa">reset-ticks</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> go<br />  </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">not</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">turtles</font><font color="#000000">  </font><font color="#5a5a5a">;; either infections or individuals</font><font color="#000000"><br />    [ </font><font color="#0000aa">stop</font><font color="#000000"> ]<br />  update-contagion </font><font color="#5a5a5a">;; Update contagion factor over time</font><font color="#000000"><br />  </font><font color="#0000aa">ask</font><font color="#000000"> infections [<br />    </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> critical-contagion-threshold]<br />    [ infect ]<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">breed</font><font color="#000000"> individuals<br />  ]<br />  fade-infections<br />  individual-growth-and-removal<br />  update-monitors<br />  </font><font color="#0000aa">tick</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /></font><font color="#5a5a5a">;; creates the infection turtles</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> infect  </font><font color="#5a5a5a">;; patch procedure</font><font color="#000000"><br />  sprout-infections </font><font color="#963700">1</font><font color="#000000"> [<br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">           </font><font color="#5a5a5a">;; Set the color of the infection to red</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000">          </font><font color="#5a5a5a">;; Set the patch color to red</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> infected-individuals infected-individuals </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"><br />    </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">shape</font><font color="#000000"> </font><font color="#963700">&quot;circle&quot;</font><font color="#000000">      </font><font color="#5a5a5a">;; Use built-in shape &quot;circle&quot; for infections</font><font color="#000000"><br />  ]<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">neighbors4</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">] [<br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> critical-contagion-threshold [<br />      infect<br />    ]<br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /></font><font color="#5a5a5a">;; achieve fading color effect for the infection as it progresses</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> fade-infections<br />  </font><font color="#0000aa">ask</font><font color="#000000"> infections<br />    [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">0.2</font><font color="#000000">  </font><font color="#5a5a5a">;; make red darker</font><font color="#000000"><br />      </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> </font><font color="#963700">red</font><font color="#000000"> </font><font color="#660096">-</font><font color="#000000"> </font><font color="#963700">3.5</font><font color="#000000">     </font><font color="#5a5a5a">;; are we almost at black?</font><font color="#000000"><br />        [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"><br />          </font><font color="#0000aa">die</font><font color="#000000"> ] ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; Dynamic contagion simulation</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> update-contagion<br />  </font><font color="#0000aa">if</font><font color="#000000"> intervention-strength </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> intervention-strength<br />  [<br />    </font><font color="#0000aa">set</font><font color="#000000"> contagion-factor (contagion-factor </font><font color="#660096">+</font><font color="#000000"> </font><font color="#660096">random</font><font color="#000000"> </font><font color="#963700">21</font><font color="#000000">) </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">8</font><font color="#000000"> </font><font color="#5a5a5a">;; Ensure contagion-factor stays within 0-7</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#5a5a5a">;; Dynamic individual growth and removal</font><font color="#000000"><br /></font><font color="#007f69">to</font><font color="#000000"> individual-growth-and-removal<br />  </font><font color="#0000aa">ask</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]<br />  [ </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> calculate-individual-growth-probability<br />      [ sprout-infections </font><font color="#963700">1</font><font color="#000000"> </font><font color="#5a5a5a">;; New individual grows as an infection</font><font color="#000000"><br />        [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">color</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000"> ]<br />      ]<br />    </font><font color="#0000aa">if</font><font color="#000000"> </font><font color="#660096">any?</font><font color="#000000"> </font><font color="#660096">neighbors4</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">] </font><font color="#660096">and</font><font color="#000000"> </font><font color="#660096">random-float</font><font color="#000000"> </font><font color="#963700">100</font><font color="#000000"> </font><font color="#660096">&lt;</font><font color="#000000"> calculate-individual-removal-probability<br />      [ </font><font color="#0000aa">set</font><font color="#000000"> </font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#963700">black</font><font color="#000000"> ] </font><font color="#5a5a5a">;; Individual dies due to infection or natural causes</font><font color="#000000"><br />  ]<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> calculate-individual-growth-probability<br />  </font><font color="#0000aa">if</font><font color="#000000"> intervention-mode<br />    [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#660096">+</font><font color="#000000"> intervention-sensitivity </font><font color="#660096">*</font><font color="#000000"> (critical-contagion-threshold </font><font color="#660096">-</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]) ]<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">3</font><font color="#000000"> </font><font color="#5a5a5a">;; Standard individual growth probability (fine-tuned)</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> calculate-individual-removal-probability<br />  </font><font color="#0000aa">if</font><font color="#000000"> intervention-mode<br />    [ </font><font color="#0000aa">report</font><font color="#000000"> intervention-sensitivity </font><font color="#660096">*</font><font color="#000000"> </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">neighbors</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">] ]<br />  </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000"> </font><font color="#5a5a5a">;; Standard individual removal probability (fine-tuned)</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to-report</font><font color="#000000"> get-average-population-density<br />  </font><font color="#0000aa">let</font><font color="#000000"> total-green </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"> </font><font color="#660096">with</font><font color="#000000"> [</font><font color="#660096">pcolor</font><font color="#000000"> </font><font color="#660096">=</font><font color="#000000"> </font><font color="#963700">green</font><font color="#000000">]<br />  </font><font color="#0000aa">let</font><font color="#000000"> total-patches </font><font color="#660096">count</font><font color="#000000"> </font><font color="#660096">patches</font><font color="#000000"><br />  </font><font color="#0000aa">ifelse</font><font color="#000000"> total-patches </font><font color="#660096">&gt;</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"><br />    [ </font><font color="#0000aa">report</font><font color="#000000"> total-green </font><font color="#660096">/</font><font color="#000000"> total-patches ]<br />    [ </font><font color="#0000aa">report</font><font color="#000000"> </font><font color="#963700">0</font><font color="#000000"> ]</font><font color="#5a5a5a">;</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /><br /><br /></font><font color="#007f69">to</font><font color="#000000"> toggle-contagion<br />  </font><font color="#0000aa">set</font><font color="#000000"> intervention-strength (intervention-strength </font><font color="#660096">+</font><font color="#000000"> </font><font color="#963700">1</font><font color="#000000">) </font><font color="#660096">mod</font><font color="#000000"> </font><font color="#963700">2</font><font color="#000000"> </font><font color="#5a5a5a">;; Toggle between 0 and 1</font><font color="#000000"><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> toggle-soc-mode<br />  </font><font color="#0000aa">set</font><font color="#000000"> intervention-mode </font><font color="#660096">not</font><font color="#000000"> intervention-mode<br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font><font color="#007f69">to</font><font color="#000000"> update-monitors<br />  </font><font color="#0000aa">set</font><font color="#000000"> average-population-density get-average-population-density<br /><br /></font><font color="#007f69">end</font><font color="#000000"><br /><br /></font>
</pre>
